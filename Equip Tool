-- Script ภายใน Tool
local tool = script.Parent
local animation = tool:WaitForChild("HoldAnimation")

local track -- จะเก็บ AnimationTrack เอาไว้

-- เมื่อ Equip
tool.Equipped:Connect(function()
	local character = tool.Parent
	local humanoid = character:FindFirstChildOfClass("Humanoid")

	if humanoid then
		local animator = humanoid:FindFirstChildOfClass("Animator")
		if not animator then
			-- ถ้าไม่มี Animator ให้สร้างใหม่
			animator = Instance.new("Animator")
			animator.Parent = humanoid
		end

		-- โหลดอนิเมชัน
		track = animator:LoadAnimation(animation)

		-- ป้องกันซ้อน ถ้ามีการเล่นอยู่แล้วหยุดก่อน
		if track.IsPlaying then
			track:Stop()
		end

		track.Priority = Enum.AnimationPriority.Action
		track.Looped = true
		track:Play()
	end
end)

-- เมื่อ UnEquip
tool.Unequipped:Connect(function()
	if track and track.IsPlaying then
		track:Stop()
	end
end)
